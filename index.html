<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 2026 Racing</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <div id="game-container">
        <canvas id="gameCanvas"></canvas>

        <!-- UI Overlay -->
        <div id="ui-layer">
            <!-- Main Menu -->
            <div id="main-menu" class="screen active">
                <h1>F1 2026 <span class="accent">RACING</span></h1>
                <div class="menu-options">
                    <button id="race-btn" class="btn-primary">RACE</button>
                    <button id="time-trials-btn" class="btn-primary">TIME TRIALS</button>
                    <button id="multiplayer-btn" class="btn-primary">MULTIPLAYER</button>
                </div>
            </div>

            <!-- Track Selection -->
            <div id="track-selection" class="screen hidden">
                <div class="menu-content">
                    <h2>SELECT TRACK</h2>
                    <div id="track-list" class="track-grid">
                        <!-- Tracks injected by JS -->
                    </div>
                    <div class="menu-actions">
                        <button id="track-back-btn" class="btn-secondary">BACK</button>
                        <button id="track-main-btn" class="btn-secondary">BACK TO MAIN MENU</button>
                    </div>
                </div>
            </div>

            <!-- Driver Selection -->
            <div id="driver-selection" class="screen hidden">
                <div class="menu-content">
                    <h2>SELECT DRIVER</h2>
                    <div id="driver-list" class="driver-grid">
                        <!-- Drivers injected by JS -->
                    </div>
                    <div class="menu-actions">
                        <button id="driver-back-btn" class="btn-secondary">BACK</button>
                        <button id="driver-main-btn" class="btn-secondary">BACK TO MAIN MENU</button>
                    </div>
                </div>
            </div>

            <!-- Tyre Selection -->
            <div id="tyre-selection" class="screen hidden">
                <div class="menu-content">
                    <h2>SELECT TYRE COMPOUND</h2>
                    <div id="tyre-list" class="tyre-grid">
                        <!-- Tyres injected by JS -->
                    </div>
                    <div class="menu-actions">
                        <button id="tyre-back-btn" class="btn-secondary">BACK</button>
                        <button id="tyre-main-btn" class="btn-secondary">BACK TO MAIN MENU</button>
                    </div>
                </div>
            </div>

            <!-- HUD -->
            <div id="hud" class="screen hidden">
                <!-- Multiplayer waiting message -->
                <div id="multiplayer-race-waiting" class="race-waiting-message" style="display: none;">
                    <span>Waiting for opponent...</span>
                </div>
                
                <!-- Start Lights (F1 style: 5 red lights) -->
                <div id="start-lights" class="start-lights">
                    <div class="start-light"></div>
                    <div class="start-light"></div>
                    <div class="start-light"></div>
                    <div class="start-light"></div>
                    <div class="start-light"></div>
                </div>

                <div class="hud-top">
                    <div class="position-box">
                        <span class="label">POS</span>
                        <span id="pos-display" class="value">1<span class="total">/22</span></span>
                    </div>
                    <div class="lap-box">
                        <span class="label">LAP</span>
                        <span id="lap-display" class="value">0<span class="total">/5</span></span>
                    </div>
                    <div class="telemetry">
                        <div class="speed-box">
                            <span id="speed-display" class="value">0</span>
                            <span class="unit">KM/H</span>
                        </div>
                        <div class="gear-box">
                            <span id="gear-display" class="value">N</span>
                        </div>
                        <div class="tire-weather">
                            <div id="weather-icon" class="weather-sunny"></div>
                            <div id="tire-icon" class="tire-soft">S</div>
                            <div id="tire-wear-bar">
                                <div id="tire-wear-fill"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lap Times Panel (Bottom Left) -->
                <div id="lap-times-panel" class="lap-times-panel">
                    <div id="lap-history" class="lap-history">
                        <!-- Last 5 lap times will be injected here -->
                    </div>
                    <div class="current-lap">
                        <span class="label">CURRENT</span>
                        <span id="lap-time-display" class="lap-time-value">00:00.000</span>
                    </div>
                </div>

                <div class="hud-bottom"></div>

                <!-- Minimap -->
                <div id="minimap-container">
                    <canvas id="minimap"></canvas>
                </div>
            </div>

            <!-- Multiplayer Lobby -->
            <div id="multiplayer-lobby" class="screen hidden">
                <div class="menu-content">
                    <h2>MULTIPLAYER</h2>
                    <div class="lobby-options">
                        <button id="create-room-btn" class="btn-primary">CREATE ROOM</button>
                        <button id="join-room-btn" class="btn-primary">JOIN ROOM</button>
                    </div>
                    <div class="menu-actions">
                        <button id="lobby-back-btn" class="btn-secondary">BACK TO MAIN MENU</button>
                    </div>
                </div>
            </div>

            <!-- Create Room Screen -->
            <div id="create-room-screen" class="screen hidden">
                <div class="menu-content">
                    <h2>WAITING FOR OPPONENT</h2>
                    <div class="room-code-display">
                        <span class="label">ROOM CODE</span>
                        <span id="room-code" class="room-code">------</span>
                        <p class="room-hint">Share this code with your opponent</p>
                    </div>
                    <div id="connection-status" class="connection-status">Waiting for opponent to join...</div>
                    <div class="menu-actions">
                        <button id="create-back-btn" class="btn-secondary">CANCEL</button>
                    </div>
                </div>
            </div>

            <!-- Join Room Screen -->
            <div id="join-room-screen" class="screen hidden">
                <div class="menu-content">
                    <h2>JOIN ROOM</h2>
                    <div class="room-code-input">
                        <span class="label">ENTER ROOM CODE</span>
                        <input type="text" id="join-code-input" class="code-input" maxlength="6" placeholder="------" autocomplete="off">
                    </div>
                    <div id="join-status" class="connection-status"></div>
                    <div class="lobby-options">
                        <button id="join-connect-btn" class="btn-primary">CONNECT</button>
                    </div>
                    <div class="menu-actions">
                        <button id="join-back-btn" class="btn-secondary">BACK</button>
                    </div>
                </div>
            </div>

            <!-- Multiplayer Waiting Screen (for guest) -->
            <div id="multiplayer-waiting" class="screen hidden">
                <div class="menu-content">
                    <h2>WAITING FOR HOST</h2>
                    <div class="waiting-message">
                        <p>Host is selecting the track...</p>
                        <div class="loading-dots">
                            <span>.</span><span>.</span><span>.</span>
                        </div>
                    </div>
                    <div class="menu-actions">
                        <button id="waiting-cancel-btn" class="btn-secondary">CANCEL</button>
                    </div>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="results-screen" class="screen hidden">
                <h2>RACE FINISHED</h2>
                <div id="results-list"></div>
                <button id="restart-btn" class="btn-secondary">BACK TO MAIN MENU</button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="js/Data.js"></script>
    <script src="js/InputHandler.js"></script>
    <script src="js/Track.js"></script>
    <script src="js/AI.js"></script>
    <script src="js/Car.js"></script>
    <script src="js/Minimap.js"></script>
    <script src="js/EngineSound.js"></script>
    <script src="js/Multiplayer.js"></script>
    <script src="js/Game.js"></script>
    <script src="js/AITest.js"></script>
    <script src="js/main.js"></script>
</body>

</html>